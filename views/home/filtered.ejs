<% layout('layouts/boilerplate')%>
<h1 class = index-title>All Artists</h1>
<div class = index-container>

    <ul class = artist-index>
        <% for(let user of users) {%>
        <li class = artist-card> 
            <h4 class = artist-name><%=user.username%> </h4>
            <% if(user.artpieces.length == 0) {%> 
                <h4 class = no-art>This artist has not uploaded any art yet</h4>
            <%}%>
            <% if(user.artpieces.length > 0) {%> 
                <h4 class = recent-caption>Most Recent Uploads:</h4>
            <%}%>
            <div class = card-art>
                
                <% if(user.artpieces.length < 3 && user.artpieces.length > 0) {%> 
                    <% for(let artpiece of user.artpieces) {%>
                        <a href="/artpieces/<%=artpiece._id %>">
                            <img class = index-img src="<%= artpiece.image.url %> ">
                        </a>
                    <%}%>
                    <a  class = profile-link href="/user/<%=user._id%>">Go to Profile</a>
                <%}%>
            
                <% if(user.artpieces.length > 3) {%> 
                    <% for(let i = 0; i<3; i++) {%>
                        <a href="/artpieces/<%=user.artpieces[i]._id %>">
                            <img class = index-img src="<%= user.artpieces[i].image.url %> ">
                        </a>
                    <%}%>
                    <a  class = profile-link href="/user/<%=user._id%>">Go to Profile</a>
                <%}%>
            </div>
        </li>
        <%}%>
    </ul>
</div>